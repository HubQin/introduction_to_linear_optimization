## 先给一句“工程版结论”

> **span 关心“有没有新方向”**
> **convex hull 关心“能不能当解”**

在优化里：

* **定价子问题**在问：👉 *这个新列是不是在 span 里？*
* **主问题可行性/最优性**在问：👉 *这个解是不是在 convex hull 里？*

---

## 一、convex hull 是什么（一句话）

给定点 $x_1,\dots,x_k$：

$$
\operatorname{conv}\{x_1,\dots,x_k\}
=
\left\{
\sum_{i=1}^k \lambda_i x_i
\;\middle|\;
\lambda_i \ge 0,\;
\sum_{i=1}^k \lambda_i = 1
\right\}
$$


关键词只有两个：

* **非负**
* **和为 1**

👉 这叫 **凸组合**

---

## 二、span vs convex hull：本质差异

| 维度      | span  | convex hull |
| ------- | ----- | ----------- |
| 系数      | 任意实数  | 非负，且和为 1    |
| 是否无限    | 是     | 否（有界）       |
| 是否必须过原点 | 是     | 否           |
| 描述的是    | 方向    | 可行解的“形状”    |
| 优化里关心   | 列是否冗余 | 解是否可行       |

一句话版：

> **span = 代数自由度**
> **convex hull = 几何可行域**

---

## 三、为什么 LP 的可行域是 convex hull？

这是 LP 的**几何本质**：

* LP 的可行域 = 若干线性约束的交
* ⇒ 一个 **凸多面体**
* ⇒ 可以写成 **极点（vertices）的 convex hull**

也就是：

> **所有可行解 = 所有极点的凸组合**

不是 span，**是 convex hull**。

---

## 四、那 span 在优化里到底干嘛用？

### 关键一句：

> **span 决定“模型有没有新信息”**

---

### 1️⃣ 列生成里最核心的一件事

主问题（RMP）本质是：

$$
\min c^\top x \
\text{s.t. } A x = b,; x \ge 0
$$

* 每一列 = 一个向量（一个“方向”）
* 当前列集合张成的是一个子空间

#### 👉 如果新列在已有列的 span 里：

* 约束空间没变
* 对偶空间没变
* **不可能改进目标值**

即使它是个“新列”，也是**代数冗余**

---

### 2️⃣ reduced cost < 0 的真正含义

从几何角度看：

> **定价子问题在找一个“不在当前 span 里的、能拉低目标值的方向”**

* reduced cost ≥ 0
  👉 新列在当前锥（cone）里，没新方向
* reduced cost < 0
  👉 出现了一个“逃逸方向”

---

## 五、convex hull 在哪里“卡你算法”

### 1️⃣ 整数规划 vs LP 松弛

* LP 解 ∈ convex hull（连续）
* IP 解 ∈ convex hull 的**整数点**

👉 gap 本质上是：

> **整数点 ≠ convex hull 的极点**

---

### 2️⃣ Branch-and-Price 的真实目标

> **通过分支 + 新列，把 LP 的 convex hull 一步步“逼近”整数 hull**

---

## 六、一个极其重要但常被忽略的关系

> **convex hull ⊂ affine hull ⊂ span**

* span：最大（无限）
* affine hull：平移后的 span
* convex hull：真正的可行解集合

你之前“原点 + 两个向量终点形成平面”的直觉，
**其实更接近 affine hull，而不是 convex hull。**

---

## 七、一句终极对照（以后不会混）

> **span 决定“有没有新方向”**
> **convex hull 决定“哪些点是解”**

> **定价问题在对抗 span**
> **主问题在逼近 convex hull**

---

如果你愿意，下一步我可以继续拆一个**很少有人讲清楚的点**：

* 为什么 **reduced cost = 几何意义上的“切平面方向”**
* 为什么 **dual 变量本质是 convex hull 的法向量**
* 为什么 **branching 会破坏定价的 span 结构**

这仨都是你现在这个阶段“一讲就通”的内容。
